{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  style: {\n    \"margin-bottom\": \"20px\"\n  }\n};\nconst _hoisted_2 = {\n  class: \"task-row\",\n  style: {\n    \"display\": \"flex\",\n    \"align-items\": \"center\"\n  }\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"task-name\",\n  style: {\n    \"flex\": \"1\"\n  }\n};\nconst _hoisted_4 = {\n  class: \"button-group\",\n  style: {\n    \"margin-top\": \"10px\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_alert = _resolveComponent(\"el-alert\");\n  const _component_el_checkbox = _resolveComponent(\"el-checkbox\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_el_card, {\n    style: {\n      \"width\": \"80%\",\n      \"margin\": \"10px auto\"\n    }\n  }, {\n    default: _withCtx(() => [_cache[7] || (_cache[7] = _createElementVNode(\"h1\", null, \"待办事项\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_el_input, {\n      modelValue: $data.newTask,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.newTask = $event),\n      placeholder: \"需要做什么？\",\n      class: \"input-field\",\n      maxlength: \"50\",\n      style: {\n        \"width\": \"calc(100% - 120px)\",\n        \"margin-right\": \"10px\"\n      }\n    }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $options.addTask\n    }, {\n      default: _withCtx(() => _cache[1] || (_cache[1] = [_createTextVNode(\"添加\")])),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])]), $data.showError ? (_openBlock(), _createBlock(_component_el_alert, {\n      key: 0,\n      type: \"error\",\n      closable: false\n    }, {\n      default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\"任务不能为空！\")])),\n      _: 1 /* STABLE */\n    })) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"h2\", null, \"已完成 \" + _toDisplayString($options.completedTasksCount) + \" 项，共 \" + _toDisplayString($data.tasks.length) + \" 项\", 1 /* TEXT */), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.tasks.filter(task => task), (task, index) => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        key: task.id,\n        class: \"task\",\n        style: {\n          \"margin-bottom\": \"10px\"\n        }\n      }, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_checkbox, {\n        modelValue: task.completed,\n        \"onUpdate:modelValue\": $event => task.completed = $event,\n        onChange: $event => $options.updateTask(task),\n        style: {\n          \"margin-right\": \"10px\"\n        }\n      }, null, 8 /* PROPS */, [\"modelValue\", \"onUpdate:modelValue\", \"onChange\"]), !task.isEditing ? (_openBlock(), _createElementBlock(\"span\", _hoisted_3, _toDisplayString(task.task), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), task.isEditing ? (_openBlock(), _createBlock(_component_el_input, {\n        key: 1,\n        modelValue: task.task,\n        \"onUpdate:modelValue\": $event => task.task = $event,\n        class: \"edit-input\",\n        style: {\n          \"flex\": \"1\",\n          \"margin-right\": \"10px\"\n        }\n      }, null, 8 /* PROPS */, [\"modelValue\", \"onUpdate:modelValue\"])) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_4, [!task.isEditing ? (_openBlock(), _createBlock(_component_el_button, {\n        key: 0,\n        type: \"primary\",\n        onClick: $event => $options.editTask(index),\n        style: {\n          \"margin-right\": \"10px\"\n        }\n      }, {\n        default: _withCtx(() => [...(_cache[3] || (_cache[3] = [_createTextVNode(\" 编辑 \")]))]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])) : _createCommentVNode(\"v-if\", true), !task.isEditing ? (_openBlock(), _createBlock(_component_el_button, {\n        key: 1,\n        type: \"danger\",\n        onClick: $event => $options.deleteTask(task.id)\n      }, {\n        default: _withCtx(() => [...(_cache[4] || (_cache[4] = [_createTextVNode(\" 删除 \")]))]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])) : _createCommentVNode(\"v-if\", true), task.isEditing ? (_openBlock(), _createBlock(_component_el_button, {\n        key: 2,\n        type: \"primary\",\n        onClick: $event => $options.saveTask(task),\n        style: {\n          \"margin-right\": \"10px\"\n        }\n      }, {\n        default: _withCtx(() => [...(_cache[5] || (_cache[5] = [_createTextVNode(\" 保存 \")]))]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])) : _createCommentVNode(\"v-if\", true), task.isEditing ? (_openBlock(), _createBlock(_component_el_button, {\n        key: 3,\n        onClick: $event => $options.cancelEdit(index)\n      }, {\n        default: _withCtx(() => [...(_cache[6] || (_cache[6] = [_createTextVNode(\" 取消 \")]))]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])) : _createCommentVNode(\"v-if\", true)])]);\n    }), 128 /* KEYED_FRAGMENT */))]),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"names":["style","class","key","_createElementBlock","_createVNode","_component_el_card","default","_withCtx","_createElementVNode","_hoisted_1","_component_el_input","modelValue","$data","newTask","_cache","$event","placeholder","maxlength","_component_el_button","type","onClick","$options","addTask","_createTextVNode","_","showError","_createBlock","_component_el_alert","closable","_createCommentVNode","_toDisplayString","completedTasksCount","tasks","length","_Fragment","_renderList","filter","task","index","id","_hoisted_2","_component_el_checkbox","completed","onChange","updateTask","isEditing","_hoisted_3","_hoisted_4","editTask","deleteTask","saveTask","cancelEdit"],"sources":["C:\\Users\\哈振宇\\Desktop\\软件工程\\springboot+vue框架\\demo\\vue\\src\\views\\ToDo.vue"],"sourcesContent":["<template>\n  <div>\n    <el-card style=\"width: 80%; margin: 10px auto\">\n      <h1>待办事项</h1>\n      <div style=\"margin-bottom: 20px;\">\n        <el-input\n          v-model=\"newTask\"\n          placeholder=\"需要做什么？\"\n          class=\"input-field\"\n          maxlength=\"50\"\n          style=\"width: calc(100% - 120px); margin-right: 10px;\"\n        />\n        <el-button type=\"primary\" @click=\"addTask\">添加</el-button>\n      </div>\n      <el-alert v-if=\"showError\" type=\"error\" :closable=\"false\">任务不能为空！</el-alert>\n\n      <h2>已完成 {{ completedTasksCount }} 项，共 {{ tasks.length }} 项</h2>\n\n      <div v-for=\"(task, index) in tasks.filter(task => task)\" :key=\"task.id\" class=\"task\" style=\"margin-bottom: 10px;\">\n        <div class=\"task-row\" style=\"display: flex; align-items: center;\">\n          <el-checkbox v-model=\"task.completed\" @change=\"updateTask(task)\" style=\"margin-right: 10px;\" />\n          <span class=\"task-name\" v-if=\"!task.isEditing\" style=\"flex: 1;\">{{ task.task }}</span>\n          <el-input\n            v-if=\"task.isEditing\"\n            v-model=\"task.task\"\n            class=\"edit-input\"\n            style=\"flex: 1; margin-right: 10px;\"\n          />\n        </div>\n\n        <div class=\"button-group\" style=\"margin-top: 10px;\">\n          <el-button\n            v-if=\"!task.isEditing\"\n            type=\"primary\"\n            @click=\"editTask(index)\"\n            style=\"margin-right: 10px;\"\n          >\n            编辑\n          </el-button>\n          <el-button\n            v-if=\"!task.isEditing\"\n            type=\"danger\"\n            @click=\"deleteTask(task.id)\"\n          >\n            删除\n          </el-button>\n          <el-button\n            v-if=\"task.isEditing\"\n            type=\"primary\"\n            @click=\"saveTask(task)\"\n            style=\"margin-right: 10px;\"\n          >\n            保存\n          </el-button>\n          <el-button\n            v-if=\"task.isEditing\"\n            @click=\"cancelEdit(index)\"\n          >\n            取消\n          </el-button>\n        </div>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport request from \"@/utils/request\";\n\nexport default {\n  name: \"Todo\",\n  data() {\n    return {\n      newTask: '',\n      tasks: [],\n      editIndex: null,\n      previousTaskName: '',\n      showError: false,\n    };\n  },\n  computed: {\n    completedTasksCount() {\n      return this.tasks.filter(task => task && task.completed).length;\n    },\n  },\n  created() {\n    this.loadTasks();\n  },\n  methods: {\n    loadTasks() {\n      const user = JSON.parse(sessionStorage.getItem('user') || \"{}\");\n      if (user.id) {\n        request.get(`/todo/user/${user.id}`).then(res => {\n          this.tasks = res.data || [];\n        });\n      }\n    },\n    addTask() {\n      const user = JSON.parse(sessionStorage.getItem('user') || \"{}\");\n      if (this.newTask.trim()) {\n        if (!user || !user.id) {\n          console.error(\"找不到userid\");\n          return;\n        }\n        const task = { task: this.newTask, completed: false, userId: user.id };\n        request.post(\"/todo\", task).then(res => {\n          if (res.code === '0') {\n            this.tasks.push(res.data);\n            this.newTask = '';\n            this.showError = false;\n            this.loadTasks();\n          }\n        });\n      } else {\n        this.showError = true;\n      }\n    },\n    toggleEditState(index, isEditing) {\n      this.tasks[index].isEditing = isEditing;\n      if (isEditing) {\n        this.previousTaskName = this.tasks[index].task;\n      }\n    },\n    editTask(index) {\n      this.toggleEditState(index, true);\n    },\n    async saveTask(task) {\n      const res = await request.put(\"/todo\", task);\n      if (res.code === '0') {\n        this.toggleEditState(this.tasks.indexOf(task), false);\n      }\n    },\n    cancelEdit(index) {\n      this.tasks[index].task = this.previousTaskName;\n      this.toggleEditState(index, false);\n    },\n    async deleteTask(id) {\n      const res = await request.delete(`/todo/${id}`);\n      if (res.code === '0') {\n        this.tasks = this.tasks.filter(task => task.id !== id);\n      }\n    },\n    async updateTask(task) {\n      await request.put(\"/todo\", task);\n    }\n  },\n};\n</script>\n\n<style>\n.task {\n  padding: 10px;\n  border: 1px solid #ebeef5;\n  border-radius: 4px;\n  margin-bottom: 10px;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}